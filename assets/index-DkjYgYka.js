(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const u="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2FzeW5jIGZ1bmN0aW9uIGcoaSxvKXtjb25zdCBzPWF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKGkpO2xldHt3aWR0aDplLGhlaWdodDp0fT1zLHtxdWFsaXR5Omw9LjksbGVuU2l6ZUxpbWl0OmM9ODE5MixmaWxlU2l6ZUxpbWl0OnA9MzAsdXNlV2VicDp1PSEwfT1vfHx7fSx3PXU/ImltYWdlL3dlYnAiOiJpbWFnZS9qcGVnIjtjb25zdCByPXA8PDIwLG09ZSp0LE09TWF0aC5taW4oYywzMjc2Nyk7bGV0IGE9MTsobT4yNjg0MzU0NTZ8fGU+Y3x8dD5jKSYmKGE9TWF0aC5taW4oTWF0aC5zcXJ0KDI2ODQzNTQ1Ni9tKSxNL2UsTS90KSk7bGV0IG47ZG97ZT1NYXRoLmZsb29yKGUqYSksdD1NYXRoLmZsb29yKHQqYSk7Y29uc3QgZj1uZXcgT2Zmc2NyZWVuQ2FudmFzKGUsdCksaD1mLmdldENvbnRleHQoIjJkIik7aC5zY2FsZShhLGEpLGguZHJhd0ltYWdlKHMsMCwwKSxuPWF3YWl0IGYuY29udmVydFRvQmxvYih7dHlwZTp3LHF1YWxpdHk6bH0pLGEqPU1hdGguc3FydChyL24uc2l6ZSl9d2hpbGUobi5zaXplPnImJmw+LjEpO3JldHVybiBufXNlbGYub25tZXNzYWdlPWk9Pntjb25zdFtvLHNdPWkuZGF0YTtnKG8scykudGhlbihlPT57c2VsZi5wb3N0TWVzc2FnZShlKX0pfX0pKCk7Cg==",y=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0)),d=typeof self<"u"&&self.Blob&&new Blob([y(u)],{type:"text/javascript;charset=utf-8"});function L(r){let e;try{if(e=d&&(self.URL||self.webkitURL).createObjectURL(d),!e)throw"";const n=new Worker(e,{name:r==null?void 0:r.name});return n.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),n}catch{return new Worker("data:text/javascript;base64,"+u,{name:r==null?void 0:r.name})}finally{e&&(self.URL||self.webkitURL).revokeObjectURL(e)}}async function W(r,e){const n=new Array;for(const s of r){const t=new Promise(async(o,l)=>{if(!s.type.startsWith("image/"))throw new Error("only image support");const{fileSizeLimit:b=30}=e||{};if(s.size<=b<<20){o(s);return}const i=new L;i.onmessage=a=>{o(a.data),i.terminate()},i.onerror=a=>{l(a),i.terminate()},i.postMessage([s,e])});n.push(t)}return Promise.all(n)}const c=document.createElement("input");c.type="file";c.accept="image/*";c.multiple=!0;document.body.appendChild(c);const f=document.createElement("div");document.body.appendChild(f);c.onchange=async()=>{try{if(console.time("compress"),!c.files)return;const r=await W(c.files,{useWebp:!1});console.timeEnd("compress"),document.body.append("压缩成功");for(let e=0;e<r.length;e++){const n=r[e],s=URL.createObjectURL(n),t=document.createElement("a");t.href=s,t.download=`compressed-${e}.${n.type.split("/")[1]}`,t.textContent=`下载-${e+1}`,f.appendChild(t)}}catch(r){console.error("压缩失败",r)}};let m=new Date().getTime();const p=()=>{const r=new Date().getTime(),e=r-m;e>1e3&&console.log("time:",e),m=r,requestAnimationFrame(p)};p();
